<Window x:Class="IcdControl.Client.LoginWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="ICD System Access" Height="550" Width="400"
        WindowStartupLocation="CenterScreen"
        ResizeMode="NoResize" WindowStyle="None" AllowsTransparency="True" Background="Transparent">

    <Border CornerRadius="12" Background="{DynamicResource SurfaceColor}" BorderBrush="{DynamicResource BorderColor}" BorderThickness="1">
        <Border.Effect>
            <DropShadowEffect BlurRadius="20" ShadowDepth="5" Opacity="0.2" Color="Black"/>
        </Border.Effect>

        <Grid>
            <Button Content="✕" HorizontalAlignment="Right" VerticalAlignment="Top" Margin="15"
                    Background="Transparent" Foreground="{DynamicResource TextSecondaryColor}" BorderThickness="0" 
                    FontSize="16" Cursor="Hand" Click="CloseApp_Click"/>

            <StackPanel x:Name="LoginPanel" VerticalAlignment="Center" HorizontalAlignment="Center" Width="300" Visibility="Visible">

                <TextBlock Text="Welcome Back" FontSize="26" FontWeight="Bold" Foreground="{DynamicResource TextPrimaryColor}" HorizontalAlignment="Center" Margin="0,0,0,5"/>
                <TextBlock Text="Sign in to ICD Control System" FontSize="14" Foreground="{DynamicResource TextSecondaryColor}" HorizontalAlignment="Center" Margin="0,0,0,30"/>

                <TextBlock Text="Username" Foreground="{DynamicResource TextSecondaryColor}" FontWeight="SemiBold" Margin="0,0,0,5"/>
                <TextBox x:Name="LoginUsernameTxt" Margin="0,0,0,15"/>

                <TextBlock Text="Password" Foreground="{DynamicResource TextSecondaryColor}" FontWeight="SemiBold" Margin="0,0,0,5"/>
                <PasswordBox x:Name="LoginPassBox" KeyDown="LoginPassBox_KeyDown" Margin="0,0,0,15"/>

                <TextBlock x:Name="LoginErrorTxt" Foreground="#DC2626" FontSize="13" FontWeight="Medium"
                           TextWrapping="Wrap" HorizontalAlignment="Center" Margin="0,0,0,10" 
                           Visibility="Collapsed"/>

                <Button Content="Sign In" Click="Login_Click" Style="{StaticResource ModernBtn}" Height="45"/>

                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,20,0,0">
                    <TextBlock Text="Don't have an account?" Foreground="{DynamicResource TextSecondaryColor}"/>
                    <Button Content="Register" Click="SwitchToRegister_Click" 
                            Background="Transparent" Foreground="{StaticResource PrimaryColor}" 
                            BorderThickness="0" FontWeight="Bold" Cursor="Hand" Margin="5,0,0,0"/>
                </StackPanel>
            </StackPanel>

            <StackPanel x:Name="RegisterPanel" VerticalAlignment="Center" HorizontalAlignment="Center" Width="300" Visibility="Collapsed">

                <TextBlock Text="Create Account" FontSize="26" FontWeight="Bold" Foreground="{DynamicResource TextPrimaryColor}" HorizontalAlignment="Center" Margin="0,0,0,20"/>

                <TextBlock Text="Username" Foreground="{DynamicResource TextSecondaryColor}" FontWeight="SemiBold" Margin="0,0,0,5"/>
                <TextBox x:Name="RegUsernameTxt" Margin="0,0,0,10"/>

                <TextBlock Text="Email" Foreground="{DynamicResource TextSecondaryColor}" FontWeight="SemiBold" Margin="0,0,0,5"/>
                <TextBox x:Name="RegEmailTxt" Margin="0,0,0,10"/>

                <TextBlock Text="Password" Foreground="{DynamicResource TextSecondaryColor}" FontWeight="SemiBold" Margin="0,0,0,5"/>
                <PasswordBox x:Name="RegPassBox" Margin="0,0,0,10"/>

                <TextBlock Text="Confirm Password" Foreground="{DynamicResource TextSecondaryColor}" FontWeight="SemiBold" Margin="0,0,0,5"/>
                <PasswordBox x:Name="RegConfirmPassBox" Margin="0,0,0,10"/>

                <TextBlock x:Name="RegErrorTxt" Foreground="#DC2626" FontSize="13" FontWeight="Medium"
                           TextWrapping="Wrap" HorizontalAlignment="Center" Margin="0,0,0,10" 
                           Visibility="Collapsed"/>

                <Button Content="Sign Up" Click="Register_Click" Style="{StaticResource ModernBtn}" Height="45"/>

                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,20,0,0">
                    <TextBlock Text="Already have an account?" Foreground="{DynamicResource TextSecondaryColor}"/>
                    <Button Content="Log In" Click="SwitchToLogin_Click" 
                            Background="Transparent" Foreground="{StaticResource PrimaryColor}" 
                            BorderThickness="0" FontWeight="Bold" Cursor="Hand" Margin="5,0,0,0"/>
                </StackPanel>
            </StackPanel>

        </Grid>
    </Border>
</Window>